{"version":3,"sources":["components/preloader/preloader.module.scss","api/api.ts","redux/reducers/appReducer/actions/appActions.ts","redux/reducers/currentBookReducer/actions/currentBookActions.ts","features/spinner/tail-spin.svg","components/preloader/Preloader.tsx","components/bookInfo/BookInfo.tsx","redux/reducers/currentBookReducer/middleware/currentBookThunks.ts","redux/reducers/foundBooksReducer/actions/foundBooksActions.ts","components/bookCard/BookCard.tsx","components/booksList/BooksList.tsx","redux/reducers/foundBooksReducer/middleware/foundBooksThunks.ts","components/categories/Categories.tsx","components/sorting/Sorting.tsx","App.tsx","redux/reducers/appReducer/appReducer.ts","redux/reducers/currentBookReducer/currentBookReducer.ts","utils/extractBookFields.ts","redux/reducers/foundBooksReducer/foundBooksReducer.ts","redux/store.ts","index.tsx","components/bookInfo/bookInfo.module.scss","app.module.scss","components/bookCard/bookCard.module.scss","components/booksList/booksList.module.scss","components/categories/categories.module.scss","components/sorting/sorting.module.scss"],"names":["module","exports","api","book","category","sorting","index","maxResults","axios","get","process","then","res","data","volumeInfo","setAppStatus","status","type","setBook","Preloader","className","s","spinner","alt","src","Spinner","BookInfo","dispatch","useDispatch","bookID","useParams","useSelector","state","currentBook","loadStatus","app","useLayoutEffect","a","result","getBookThunk","container","bookImage","image","bookDescription","categories","map","b","title","subTitle","author","descriptionContainer","dangerouslySetInnerHTML","__html","description","setBooks","totalItems","books","loadMore","BookCard","authors","id","join","card","to","BooksList","startIndex","founds","cardWrapper","length","button","disabled","onClick","items","item","loadMoreThunk","Option","Select","Categories","onChangeCategory","onChange","value","select","Sorting","onChangeSorting","Search","Input","App","navigate","useNavigate","foundBooks","booksInfo","useState","setSorting","setCategory","Math","min","header","search","onSearch","bookToSearch","getBooksThunk","placeholder","allowClear","categoriesWrapper","path","element","bookListWrapper","initialState","extractBookFields","imageLinks","subtitle","thumbnail","RootReducer","combineReducers","action","medium","store","createStore","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"2FACAA,EAAOC,QAAU,CAAC,QAAU,6B,+MCCfC,EAAM,SAEfC,EACAC,EACAC,EACAC,EACAC,GAEA,OAAOC,IACJC,IADI,UAEAC,uCAFA,qBAEsCP,EAFtC,oBAEsDC,EAFtD,oBAE0EC,EAF1E,uBAEgGC,EAFhG,uBAEoHC,EAFpH,gBAEsIG,4CAE1IC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,SAZVX,EAAM,SAcTC,GACN,OAAOK,IACJC,IADI,UACsBC,uCADtB,mBAC0DP,IAC9DQ,MAAK,SAAAC,GAAG,OAAIA,EAAIC,KAAKC,eCjBfC,EAAe,SAACC,GAAD,MACzB,CACCC,KAAM,4BACND,WCHSE,EAAU,SAACf,GAAD,MACpB,CACCc,KAAM,wBACNd,SCLW,MAA0B,sC,yBCM5BgB,EAAY,kBACvB,sBAAKC,UAAWC,IAAEC,QAAlB,UACE,qBAAKC,IAAI,YAAYC,IAAKC,IAC1B,iD,iBCESC,EAAW,WAAqB,IAAD,IACpCC,EAAWC,cAEXC,EAASC,cAET3B,EAAO4B,aAAY,SAACC,GAAD,OAA6BA,EAAMC,eACtDC,EAAaH,aAAY,SAACC,GAAD,OAA6BA,EAAMG,IAAInB,UAEtEoB,2BAAgB,WACdT,ECdwB,SAACxB,GAAD,8CAAkB,WAAOwB,GAAP,eAAAU,EAAA,6DAC5CV,EAASZ,EAAa,YADsB,SAEvBb,EAAYC,GAFW,OAEtCmC,EAFsC,OAG5CX,EAAST,EAAQoB,IACjBX,EAASZ,EAAa,cAJsB,2CAAlB,sDDcfwB,CAAaV,EAAO,SAC5B,IAIH,OACE,8BACkB,YAAfK,EACC,cAAC,EAAD,IAEA,sBAAKd,UAAWC,IAAEmB,UAAlB,UACE,qBAAKpB,UAAWC,IAAEoB,UAAlB,SACE,qBAAKjB,IAAKrB,EAAKuC,MAAOnB,IAAI,gBAG5B,sBAAKH,UAAWC,IAAEsB,gBAAlB,UACE,wCACGxC,EAAKyC,kBADR,aACG,EAAiBC,KAAI,SAAAC,GAAC,OACrB,sBAAM1B,UAAWC,IAAEuB,WAAnB,SACGE,GADiCA,QAKxC,gCACG3C,EAAK4C,MACL5C,EAAK6C,YAER,qBAAK5B,UAAWC,IAAE4B,OAAlB,mBACG9C,EAAK8C,cADR,aACG,EAAaJ,KAAI,SAAAI,GAAM,OACtB,iCAAoBA,EAApB,MAAWA,QAGf,mBACE7B,UAAWC,IAAE6B,qBACbC,wBA/B6B,CAAEC,OAAQjD,EAAKkD,wBErB7CC,EAAW,SAACC,EAAoBC,GAArB,MACrB,CAAEvC,KAAM,wBAAyBuC,QAAOD,eAE9BE,EAAW,SAACF,EAAoBC,GAArB,MACrB,CAAEvC,KAAM,uBAAwBuC,QAAOD,e,iBCQ7BG,EAAW,SAAC,GAMG,IACtBC,EANJC,EAKyB,EALzBA,GACAhB,EAIyB,EAJzBA,WACAG,EAGyB,EAHzBA,MACAE,EAEyB,EAFzBA,OACAP,EACyB,EADzBA,MAMA,OAHIO,IACFU,EAAUV,EAAOY,KAAK,QAGtB,qBAAKzC,UAAWC,IAAEyC,KAAlB,SACE,eAAC,IAAD,CAASC,GAAE,mBAAcH,GAAzB,UACE,qBAAKpC,IAAKkB,EAAOnB,IAAI,cACrB,sBAAKH,UAAWC,IAAEgC,YAAlB,UACE,qBAAKjC,UAAWC,IAAEuB,WAAlB,SAA+BA,IAC/B,qBAAKxB,UAAWC,IAAE0B,MAAlB,SAA0BA,IAC1B,qBAAK3B,UAAWC,IAAE4B,OAAlB,SAA2BU,a,iBCRxBK,EAAY,SAAC,GASM,IAR9BT,EAQ6B,EAR7BA,WACArB,EAO6B,EAP7BA,WACA3B,EAM6B,EAN7BA,WACAJ,EAK6B,EAL7BA,KACA8D,EAI6B,EAJ7BA,WACA7D,EAG6B,EAH7BA,SACAC,EAE6B,EAF7BA,QACAmD,EAC6B,EAD7BA,MAEM7B,EAAWC,cAKjB,OACE,gCACE,sBAAKR,UAAWC,IAAE6C,OAAlB,mBAAiCX,EAAjC,cACA,qBAAKnC,UAAWC,IAAE8C,YAAlB,SACGX,EAAMX,KAAI,gBAAGe,EAAH,EAAGA,GAAIhB,EAAP,EAAOA,WAAYG,EAAnB,EAAmBA,MAAOL,EAA1B,EAA0BA,MAAOO,EAAjC,EAAiCA,OAAjC,OACT,cAAC,EAAD,CAEEW,GAAIA,EACJb,MAAOA,EACPL,MAAOA,EACPO,OAAQA,EACRL,WAAYA,EAAaA,EA5BP,GA4B2C,IALxDgB,QASVJ,EAAMY,OAASb,EACd,wBACEnC,UAAWC,IAAEgD,OACbC,SAAyB,YAAfpC,EACVjB,KAAK,SACLsD,QAxBS,WACf5C,ECXF,SAACxB,EAAcC,EAAkBC,EAAiBC,EAAeC,GAAjE,8CACA,WAAOoB,GAAP,qBAAAU,EAAA,6DACEV,EAASZ,EAAa,YADxB,SAEuBb,EAAaC,EAAMC,EAAUC,EAASC,EAAOC,GAFpE,OAEQ+B,EAFR,OAGUiB,EAAejB,EAAfiB,WACFC,EAJR,UAIgBlB,EAAOkC,aAJvB,aAIgB,EAAc3B,KAAI,SAAA4B,GAAI,MAAK,CACvCb,GAAIa,EAAKb,GACT9C,WAAY2D,EAAK3D,eAEnBa,EAAS8B,EAASF,EAAYC,GAAS,KACvC7B,EAASZ,EAAa,cATxB,2CADA,sDDWW2D,CAAcvE,EAAMC,EAAUC,EAAS4D,EAAY1D,KAmBxD,uBAQE,S,0BEzDFoE,EAAWC,IAAXD,OAMKE,EAAa,SAAC,GAAD,IAAGC,EAAH,EAAGA,iBAAkB1E,EAArB,EAAqBA,SAArB,OACxB,sBAAKgB,UAAWC,IAAEuB,WAAlB,UACE,6CACA,eAAC,IAAD,CAAQmC,SAAUD,EAAkBE,MAAO5E,EAAUgB,UAAWC,IAAE4D,OAAlE,UACE,cAACN,EAAD,CAAQK,MAAM,GAAd,iBACA,cAACL,EAAD,CAAQK,MAAM,MAAd,iBACA,cAACL,EAAD,CAAQK,MAAM,YAAd,uBACA,cAACL,EAAD,CAAQK,MAAM,YAAd,uBACA,cAACL,EAAD,CAAQK,MAAM,UAAd,qBACA,cAACL,EAAD,CAAQK,MAAM,UAAd,qBACA,cAACL,EAAD,CAAQK,MAAM,SAAd,2B,iBChBEL,EAAWC,IAAXD,OAOKO,EAAU,SAAC,GAAD,IAAGC,EAAH,EAAGA,gBAAiB9E,EAApB,EAAoBA,QAApB,OACrB,sBAAKe,UAAWC,IAAEjB,SAAlB,UACE,6CACA,eAAC,IAAD,CAAQ2E,SAAUI,EAAiBH,MAAO3E,EAASe,UAAWC,IAAEhB,QAAhE,UACE,cAAC,EAAD,CAAQ2E,MAAM,YAAd,uBACA,cAAC,EAAD,CAAQA,MAAM,SAAd,2BCFEI,EAAWC,IAAXD,OAKKE,EAAM,WACjB,IAAM3D,EAAWC,cACX2D,EAAWC,cAEXhC,EAAQzB,aAAY,SAACC,GAAD,OAA6BA,EAAMyD,WAAWC,aAClEnC,EAAaxB,aACjB,SAACC,GAAD,OAA6BA,EAAMyD,WAAWlC,cAE1CrB,EAAaH,aAAY,SAACC,GAAD,OAA6BA,EAAMG,IAAInB,UAEtE,EAA8B2E,mBAAS,aAAvC,mBAAOtF,EAAP,KAAgBuF,EAAhB,KACA,EAAgCD,mBAAS,IAAzC,mBAAOvF,EAAP,KAAiByF,EAAjB,KACA,EAAwBF,mBAAS,IAAjC,mBAAOxF,EAAP,KAAae,EAAb,KAEM+C,EAAaT,EAAMY,OACnB7D,EAAauF,KAAKC,IAlBH,GAkBuBxC,EAAaU,GAgBzD,OACE,sBAAK7C,UAAWC,IAAEmB,UAAlB,UACE,sBAAKpB,UAAWC,IAAE2E,OAAlB,UACE,kDAEA,cAACZ,EAAD,CACEhE,UAAWC,IAAE4E,OACbC,SArBS,SAACC,GAChBZ,EAAS,KACTrE,EAAQiF,GACRxE,EHlCF,SAACxB,EAAcC,EAAkBC,EAAiBC,EAAeC,GAAjE,8CACA,WAAOoB,GAAP,qBAAAU,EAAA,6DACEV,EAASZ,EAAa,YADxB,SAGuBb,EAAaC,EAAMC,EAAUC,EAASC,EAAOC,GAHpE,OAGQ+B,EAHR,OAKUiB,EAAejB,EAAfiB,WAEFC,EAPR,UAOgBlB,EAAOkC,aAPvB,aAOgB,EAAc3B,KAAI,SAAA4B,GAAI,MAAK,CACvCb,GAAIa,EAAKb,GACT9C,WAAY2D,EAAK3D,eAEnBa,EAASZ,EAAa,cAEtBY,EAAS2B,EAASC,EAAYC,GAAS,KAbzC,2CADA,sDGmCI4C,CACED,EACA/F,EACAC,EA1B4B,EADb,MA0CbgG,YAAY,oBACZC,YAAU,IAGZ,sBAAKlF,UAAWC,IAAEkF,kBAAlB,UACE,cAAC,EAAD,CAAYzB,iBAAkBe,EAAazF,SAAUA,IAErD,cAAC,EAAD,CAAS+E,gBAAiBS,EAAYvF,QAASA,UAInD,8BACE,eAAC,IAAD,WACE,cAAC,IAAD,CACEmG,KAAK,IACLC,QACE,qBAAKrF,UAAWC,IAAEqF,gBAAlB,SACkB,YAAfxE,EACC,cAAC,EAAD,IAEA,cAAC,EAAD,CACEsB,MAAOA,EACPnD,QAASA,EACTD,SAAUA,EACV6D,WAAYA,EACZV,WAAYA,EACZrB,WAAYA,EACZ3B,WAAYA,EACZJ,KAAMA,QAMhB,cAAC,IAAD,CAAOqG,KAAK,aAAaC,QAAS,cAAC,EAAD,e,yBC5FtCE,EAA0B,CAC9B3F,OAAQ,QCDJ2F,EAA0B,CAC9BjE,MAAO,GACPW,YAAa,GACbN,MAAO,GACPH,WAAY,GACZK,OAAQ,GACRD,SAAU,I,SCNC4D,GAAoB,SAAC,GAAD,IAC/BhD,EAD+B,EAC/BA,GAD+B,IAE/B9C,WAAciC,EAFiB,EAEjBA,MAAOH,EAFU,EAEVA,WAAYiE,EAFF,EAEEA,WAAYlD,EAFd,EAEcA,QAFd,MAGL,CAC1BC,KACAhB,aACAI,SAN+B,EAEuB8D,SAKtD7D,OAAQU,EACRjB,MAAOmE,EAAaA,EAAWE,UAAY,GAC3ChE,UCPI4D,GAA0B,CAC9BpD,WAAY,EACZmC,UAAW,ICCPsB,GAAcC,YAAgB,CAClCxB,WDC+B,WAGhB,IAFfzD,EAEc,uDAFN2E,GACRO,EACc,uCACd,OAAQA,EAAOjG,MACb,IAAK,wBACH,OAAO,2BACFe,GADL,IAEE0D,UAAWwB,EAAO1D,MAAMX,IAAI+D,IAC5BrD,WAAY2D,EAAO3D,aAEvB,IAAK,uBACH,OAAO,2BACFvB,GADL,IAEE0D,UAAU,GAAD,oBAAM1D,EAAM0D,WAAZ,aAA0BwB,EAAO1D,MAAMX,IAAI+D,MACpDrD,WAAY2D,EAAO3D,aAEvB,QACE,OAAOvB,IClBXC,YHEgC,WAGjB,IAFfD,EAEc,uDAFN2E,EACRO,EACc,uCACd,MACO,0BADCA,EAAOjG,KAEJ,CACLoC,YAAa6D,EAAO/G,KAAKkD,YACzBJ,OAAQiE,EAAO/G,KAAKwD,QACpBf,WAAYsE,EAAO/G,KAAKyC,WACxBF,MAAOwE,EAAO/G,KAAK0G,WAAaK,EAAO/G,KAAK0G,WAAWM,OAAS,GAChEnE,SAAUkE,EAAO/G,KAAK2G,SACtB/D,MAAOmE,EAAO/G,KAAK4C,OAGdf,GGhBXG,IJLwB,WAA2D,IAA1DH,EAAyD,uDAAjD2E,EAAcO,EAAmC,uCAClF,MACO,8BADCA,EAAOjG,KAEJ,2BACFe,GADL,IAEEhB,OAAQkG,EAAOlG,SAGVgB,KIAAoF,GAAQC,YAAYL,GAAaM,YAAgBC,MCH9DC,IAASC,OACP,cAAC,IAAD,CAAUL,MAAOA,GAAjB,SACE,cAAC,IAAD,UACE,cAAC,EAAD,QAGJM,SAASC,eAAe,U,mBCf1B3H,EAAOC,QAAU,CAAC,UAAY,4BAA4B,UAAY,4BAA4B,gBAAkB,kCAAkC,WAAa,6BAA6B,OAAS,yBAAyB,qBAAuB,yC,mBCAzPD,EAAOC,QAAU,CAAC,UAAY,uBAAuB,OAAS,oBAAoB,kBAAoB,+BAA+B,OAAS,oBAAoB,gBAAkB,+B,mBCApLD,EAAOC,QAAU,CAAC,KAAO,uBAAuB,YAAc,8BAA8B,WAAa,6BAA6B,MAAQ,wBAAwB,OAAS,2B,mBCA/KD,EAAOC,QAAU,CAAC,OAAS,0BAA0B,YAAc,+BAA+B,OAAS,4B,mBCA3GD,EAAOC,QAAU,CAAC,WAAa,+BAA+B,OAAS,6B,mBCAvED,EAAOC,QAAU,CAAC,SAAW,0BAA0B,QAAU,4B","file":"static/js/main.c28bdbf4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"preloader_spinner__2srWC\"};","import axios from 'axios';\r\n\r\nexport const api = {\r\n  getBooks(\r\n    book: string,\r\n    category: string,\r\n    sorting: string,\r\n    index: number,\r\n    maxResults: number,\r\n  ) {\r\n    return axios\r\n      .get<AxiosBooksResponse>(\r\n        `${process.env.REACT_APP_URL}volumes?q=${book}+subject:${category}&orderBy=${sorting}&startIndex=${index}&maxResults=${maxResults}&key=${process.env.REACT_APP_MY_API_KEY}`,\r\n      )\r\n      .then(res => res.data);\r\n  },\r\n  getBook(book: string) {\r\n    return axios\r\n      .get<AxiosBookResponse>(`${process.env.REACT_APP_URL}volumes/${book}`)\r\n      .then(res => res.data.volumeInfo);\r\n  },\r\n};\r\n\r\n/// TYPE\r\ntype AxiosBooksResponse = {\r\n  totalItems: number;\r\n  items?: {\r\n    id: string;\r\n    volumeInfo: {\r\n      title: string;\r\n      subtitle: string;\r\n      categories: string[];\r\n      authors: string[];\r\n      imageLinks: {\r\n        thumbnail: string;\r\n      };\r\n    };\r\n  }[];\r\n};\r\n\r\ntype AxiosBookResponse = {\r\n  volumeInfo: {\r\n    title: string;\r\n    subtitle: string;\r\n    categories: string[];\r\n    authors: string[];\r\n    imageLinks: {\r\n      medium: string;\r\n    };\r\n    description: string;\r\n  };\r\n};\r\n","import { RequestStatusType } from '../types';\r\n\r\nexport const setAppStatus = (status: RequestStatusType) =>\r\n  ({\r\n    type: 'APP_REDUCER/CHANGE-STATUS',\r\n    status,\r\n  } as const);\r\n","import { currentBookType } from '../types';\r\n\r\nexport const setBook = (book: currentBookType) =>\r\n  ({\r\n    type: 'CURRENT_BOOK/SET-BOOK',\r\n    book,\r\n  } as const);\r\n","export default __webpack_public_path__ + \"static/media/tail-spin.04c17002.svg\";","import { ReactElement } from 'react';\r\n\r\nimport Spinner from '../../features/spinner/tail-spin.svg';\r\n\r\nimport s from './preloader.module.scss';\r\n\r\nexport const Preloader = (): ReactElement => (\r\n  <div className={s.spinner}>\r\n    <img alt=\"Preloader\" src={Spinner} />\r\n    <div>loading...</div>\r\n  </div>\r\n);\r\n","import { ReactElement, useLayoutEffect } from 'react';\r\n\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport { getBookThunk } from '../../redux/reducers/currentBookReducer/middleware/currentBookThunks';\r\nimport { AppRootStateType } from '../../redux/store';\r\nimport { Preloader } from '../preloader/Preloader';\r\n\r\nimport s from './bookInfo.module.scss';\r\n\r\nexport const BookInfo = (): ReactElement => {\r\n  const dispatch = useDispatch();\r\n\r\n  const bookID = useParams();\r\n\r\n  const book = useSelector((state: AppRootStateType) => state.currentBook);\r\n  const loadStatus = useSelector((state: AppRootStateType) => state.app.status);\r\n\r\n  useLayoutEffect(() => {\r\n    dispatch(getBookThunk(bookID['*']!));\r\n  }, []);\r\n\r\n  const parseBookDescription = (): any => ({ __html: book.description });\r\n\r\n  return (\r\n    <div>\r\n      {loadStatus === 'loading' ? (\r\n        <Preloader />\r\n      ) : (\r\n        <div className={s.container}>\r\n          <div className={s.bookImage}>\r\n            <img src={book.image} alt=\"bookImage\" />\r\n          </div>\r\n\r\n          <div className={s.bookDescription}>\r\n            <div>\r\n              {book.categories?.map(b => (\r\n                <span className={s.categories} key={b}>\r\n                  {b}\r\n                </span>\r\n              ))}\r\n            </div>\r\n            <div>\r\n              {book.title}\r\n              {book.subTitle}\r\n            </div>\r\n            <div className={s.author}>\r\n              {book.author?.map(author => (\r\n                <span key={author}>{author} </span>\r\n              ))}\r\n            </div>\r\n            <p\r\n              className={s.descriptionContainer}\r\n              dangerouslySetInnerHTML={parseBookDescription()}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import { Dispatch } from 'redux';\r\n\r\nimport { api } from '../../../../api/api';\r\nimport { setAppStatus } from '../../appReducer/actions/appActions';\r\nimport { setBook } from '../actions/currentBookActions';\r\n\r\nexport const getBookThunk = (book: string) => async (dispatch: Dispatch) => {\r\n  dispatch(setAppStatus('loading'));\r\n  const result = await api.getBook(book);\r\n  dispatch(setBook(result));\r\n  dispatch(setAppStatus('succeeded'));\r\n};\r\n","import { foundBooksType } from '../types';\r\n\r\nexport const setBooks = (totalItems: number, books: foundBooksType[]) =>\r\n  ({ type: 'FOUND_BOOKS/SET-BOOKS', books, totalItems } as const);\r\n\r\nexport const loadMore = (totalItems: number, books: foundBooksType[]) =>\r\n  ({ type: 'FIND_BOOKS/LOAD-MORE', books, totalItems } as const);\r\n","import { ReactElement } from 'react';\r\n\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport s from './bookCard.module.scss';\r\n\r\ninterface Props {\r\n  id: string;\r\n  image?: string;\r\n  title?: string;\r\n  categories?: string;\r\n  author?: string[];\r\n}\r\n\r\nexport const BookCard = ({\r\n  id,\r\n  categories,\r\n  title,\r\n  author,\r\n  image,\r\n}: Props): ReactElement => {\r\n  let authors;\r\n  if (author) {\r\n    authors = author.join(' / ');\r\n  }\r\n  return (\r\n    <div className={s.card}>\r\n      <NavLink to={`bookInfo/${id}`}>\r\n        <img src={image} alt=\"bookImage\" />\r\n        <div className={s.description}>\r\n          <div className={s.categories}>{categories}</div>\r\n          <div className={s.title}>{title}</div>\r\n          <div className={s.author}>{authors}</div>\r\n        </div>\r\n      </NavLink>\r\n    </div>\r\n  );\r\n};\r\n","import React, { ReactElement } from 'react';\r\n\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport { RequestStatusType } from '../../redux/reducers/appReducer/types';\r\nimport { loadMoreThunk } from '../../redux/reducers/foundBooksReducer/middleware/foundBooksThunks';\r\nimport { foundBookType } from '../../redux/reducers/foundBooksReducer/types';\r\nimport { BookCard } from '../bookCard/BookCard';\r\n\r\nimport s from './booksList.module.scss';\r\n\r\ninterface PropsType {\r\n  totalItems: number;\r\n  loadStatus: RequestStatusType;\r\n  maxResults: number;\r\n  book: string;\r\n  category: string;\r\n  startIndex: number;\r\n  sorting: string;\r\n  books: foundBookType[];\r\n}\r\n\r\nconst FIRST_CATEGORIES_ITEM = 0;\r\n\r\nexport const BooksList = ({\r\n  totalItems,\r\n  loadStatus,\r\n  maxResults,\r\n  book,\r\n  startIndex,\r\n  category,\r\n  sorting,\r\n  books,\r\n}: PropsType): ReactElement => {\r\n  const dispatch = useDispatch();\r\n  const loadMore = (): void => {\r\n    dispatch(loadMoreThunk(book, category, sorting, startIndex, maxResults));\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className={s.founds}>Found {totalItems} results</div>\r\n      <div className={s.cardWrapper}>\r\n        {books.map(({ id, categories, title, image, author }) => (\r\n          <BookCard\r\n            key={id}\r\n            id={id}\r\n            title={title}\r\n            image={image}\r\n            author={author}\r\n            categories={categories ? categories[FIRST_CATEGORIES_ITEM] : ''}\r\n          />\r\n        ))}\r\n      </div>\r\n      {books.length < totalItems ? (\r\n        <button\r\n          className={s.button}\r\n          disabled={loadStatus === 'disable'}\r\n          type=\"button\"\r\n          onClick={loadMore}\r\n        >\r\n          load More\r\n        </button>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n","import { Dispatch } from 'redux';\r\n\r\nimport { api } from '../../../../api/api';\r\nimport { setAppStatus } from '../../appReducer/actions/appActions';\r\nimport { loadMore, setBooks } from '../actions/foundBooksActions';\r\n\r\nexport const getBooksThunk =\r\n  (book: string, category: string, sorting: string, index: number, maxResults: number) =>\r\n  async (dispatch: Dispatch) => {\r\n    dispatch(setAppStatus('loading'));\r\n\r\n    const result = await api.getBooks(book, category, sorting, index, maxResults);\r\n\r\n    const { totalItems } = result;\r\n\r\n    const books = result.items?.map(item => ({\r\n      id: item.id,\r\n      volumeInfo: item.volumeInfo,\r\n    }));\r\n    dispatch(setAppStatus('succeeded'));\r\n\r\n    dispatch(setBooks(totalItems, books || []));\r\n  };\r\n\r\nexport const loadMoreThunk =\r\n  (book: string, category: string, sorting: string, index: number, maxResults: number) =>\r\n  async (dispatch: Dispatch) => {\r\n    dispatch(setAppStatus('disable'));\r\n    const result = await api.getBooks(book, category, sorting, index, maxResults);\r\n    const { totalItems } = result;\r\n    const books = result.items?.map(item => ({\r\n      id: item.id,\r\n      volumeInfo: item.volumeInfo,\r\n    }));\r\n    dispatch(loadMore(totalItems, books || []));\r\n    dispatch(setAppStatus('succeeded'));\r\n  };\r\n","import React, { ReactElement } from 'react';\r\n\r\nimport { Select } from 'antd';\r\n\r\nimport s from './categories.module.scss';\r\n\r\nconst { Option } = Select;\r\n\r\ninterface PropsType {\r\n  onChangeCategory: (value: string) => void;\r\n  category: string;\r\n}\r\nexport const Categories = ({ onChangeCategory, category }: PropsType): ReactElement => (\r\n  <div className={s.categories}>\r\n    <div>categories</div>\r\n    <Select onChange={onChangeCategory} value={category} className={s.select}>\r\n      <Option value=\"\">all</Option>\r\n      <Option value=\"art\">art</Option>\r\n      <Option value=\"biography\">biography</Option>\r\n      <Option value=\"computers\">computers</Option>\r\n      <Option value=\"history\">history</Option>\r\n      <Option value=\"medical\">medical</Option>\r\n      <Option value=\"poetry\">poetry</Option>\r\n    </Select>\r\n  </div>\r\n);\r\n","import React, { ReactElement } from 'react';\r\n\r\nimport { Select } from 'antd';\r\n\r\nimport s from './sorting.module.scss';\r\n\r\nconst { Option } = Select;\r\n\r\ninterface PropsType {\r\n  onChangeSorting: (value: string) => void;\r\n  sorting: string;\r\n}\r\n\r\nexport const Sorting = ({ onChangeSorting, sorting }: PropsType): ReactElement => (\r\n  <div className={s.category}>\r\n    <div>sorting by</div>\r\n    <Select onChange={onChangeSorting} value={sorting} className={s.sorting}>\r\n      <Option value=\"relevance\">relevance</Option>\r\n      <Option value=\"newest\">newest</Option>\r\n    </Select>\r\n  </div>\r\n);\r\n","import React, { ReactElement, useState } from 'react';\r\n\r\nimport 'antd/dist/antd.css';\r\nimport { Input } from 'antd';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Route, Routes, useNavigate } from 'react-router-dom';\r\n\r\nimport s from './app.module.scss';\r\nimport { BookInfo } from './components/bookInfo/BookInfo';\r\nimport { BooksList } from './components/booksList/BooksList';\r\nimport { Categories } from './components/categories/Categories';\r\nimport { Preloader } from './components/preloader/Preloader';\r\nimport { Sorting } from './components/sorting/Sorting';\r\nimport { getBooksThunk } from './redux/reducers/foundBooksReducer/middleware/foundBooksThunks';\r\nimport { AppRootStateType } from './redux/store';\r\n\r\nconst { Search } = Input;\r\n\r\nconst BOOKS_PER_PAGE = 30;\r\nconst START_INDEX_TO_FIRST_SEARCH = 0;\r\n\r\nexport const App = (): ReactElement => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const books = useSelector((state: AppRootStateType) => state.foundBooks.booksInfo);\r\n  const totalItems = useSelector(\r\n    (state: AppRootStateType) => state.foundBooks.totalItems,\r\n  );\r\n  const loadStatus = useSelector((state: AppRootStateType) => state.app.status);\r\n\r\n  const [sorting, setSorting] = useState('relevance');\r\n  const [category, setCategory] = useState('');\r\n  const [book, setBook] = useState('');\r\n\r\n  const startIndex = books.length;\r\n  const maxResults = Math.min(BOOKS_PER_PAGE, totalItems - startIndex);\r\n\r\n  const onSearch = (bookToSearch: string): void => {\r\n    navigate('/');\r\n    setBook(bookToSearch);\r\n    dispatch(\r\n      getBooksThunk(\r\n        bookToSearch,\r\n        category,\r\n        sorting,\r\n        START_INDEX_TO_FIRST_SEARCH,\r\n        BOOKS_PER_PAGE,\r\n      ),\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className={s.container}>\r\n      <div className={s.header}>\r\n        <h1>Search for books</h1>\r\n\r\n        <Search\r\n          className={s.search}\r\n          onSearch={onSearch}\r\n          placeholder=\"input search text\"\r\n          allowClear\r\n        />\r\n\r\n        <div className={s.categoriesWrapper}>\r\n          <Categories onChangeCategory={setCategory} category={category} />\r\n\r\n          <Sorting onChangeSorting={setSorting} sorting={sorting} />\r\n        </div>\r\n      </div>\r\n\r\n      <div>\r\n        <Routes>\r\n          <Route\r\n            path=\"/\"\r\n            element={\r\n              <div className={s.bookListWrapper}>\r\n                {loadStatus === 'loading' ? (\r\n                  <Preloader />\r\n                ) : (\r\n                  <BooksList\r\n                    books={books}\r\n                    sorting={sorting}\r\n                    category={category}\r\n                    startIndex={startIndex}\r\n                    totalItems={totalItems}\r\n                    loadStatus={loadStatus}\r\n                    maxResults={maxResults}\r\n                    book={book}\r\n                  />\r\n                )}\r\n              </div>\r\n            }\r\n          />\r\n          <Route path=\"bookInfo/*\" element={<BookInfo />} />\r\n        </Routes>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { ActionsType, initState } from './types';\r\n\r\nconst initialState: initState = {\r\n  status: 'idle',\r\n};\r\nexport const appReducer = (state = initialState, action: ActionsType): initState => {\r\n  switch (action.type) {\r\n    case 'APP_REDUCER/CHANGE-STATUS':\r\n      return {\r\n        ...state,\r\n        status: action.status,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { ActionsType, initState } from './types';\r\n\r\nconst initialState: initState = {\r\n  image: '',\r\n  description: '',\r\n  title: '',\r\n  categories: [],\r\n  author: [],\r\n  subTitle: '',\r\n};\r\n\r\nexport const currentBookReducer = (\r\n  state = initialState,\r\n  action: ActionsType,\r\n): initState => {\r\n  switch (action.type) {\r\n    case 'CURRENT_BOOK/SET-BOOK':\r\n      return {\r\n        description: action.book.description,\r\n        author: action.book.authors,\r\n        categories: action.book.categories,\r\n        image: action.book.imageLinks ? action.book.imageLinks.medium : '',\r\n        subTitle: action.book.subtitle,\r\n        title: action.book.title,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { foundBooksType } from '../redux/reducers/foundBooksReducer/types';\r\n\r\nexport const extractBookFields = ({\r\n  id,\r\n  volumeInfo: { title, categories, imageLinks, authors, subtitle },\r\n}: foundBooksType): any => ({\r\n  id,\r\n  categories,\r\n  subTitle: subtitle,\r\n  author: authors,\r\n  image: imageLinks ? imageLinks.thumbnail : '',\r\n  title,\r\n});\r\n","import { extractBookFields } from '../../../utils/extractBookFields';\r\n\r\nimport { ActionsType, initState } from './types';\r\n\r\nconst initialState: initState = {\r\n  totalItems: 0,\r\n  booksInfo: [],\r\n};\r\n\r\nexport const foundBooksReducer = (\r\n  state = initialState,\r\n  action: ActionsType,\r\n): initState => {\r\n  switch (action.type) {\r\n    case 'FOUND_BOOKS/SET-BOOKS':\r\n      return {\r\n        ...state,\r\n        booksInfo: action.books.map(extractBookFields),\r\n        totalItems: action.totalItems,\r\n      };\r\n    case 'FIND_BOOKS/LOAD-MORE':\r\n      return {\r\n        ...state,\r\n        booksInfo: [...state.booksInfo, ...action.books.map(extractBookFields)],\r\n        totalItems: action.totalItems,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { applyMiddleware, combineReducers, createStore } from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport { appReducer } from './reducers/appReducer/appReducer';\r\nimport { currentBookReducer } from './reducers/currentBookReducer/currentBookReducer';\r\nimport { foundBooksReducer } from './reducers/foundBooksReducer/foundBooksReducer';\r\n\r\nconst RootReducer = combineReducers({\r\n  foundBooks: foundBooksReducer,\r\n  currentBook: currentBookReducer,\r\n  app: appReducer,\r\n});\r\n\r\nexport const store = createStore(RootReducer, applyMiddleware(thunk));\r\nexport type AppRootStateType = ReturnType<typeof RootReducer>;\r\n","import React from 'react';\r\n\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\n\r\nimport { App } from './App';\r\nimport { store } from './redux/store';\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </Provider>,\r\n  document.getElementById('root'),\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"bookInfo_container__2CTee\",\"bookImage\":\"bookInfo_bookImage__3WE3_\",\"bookDescription\":\"bookInfo_bookDescription__18aax\",\"categories\":\"bookInfo_categories__sOKpu\",\"author\":\"bookInfo_author__1J8zJ\",\"descriptionContainer\":\"bookInfo_descriptionContainer__3B50q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"app_container__1lkyz\",\"header\":\"app_header__2D4ob\",\"categoriesWrapper\":\"app_categoriesWrapper__3AiL-\",\"search\":\"app_search__40oP2\",\"bookListWrapper\":\"app_bookListWrapper__3bvqR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"bookCard_card__3gtM6\",\"description\":\"bookCard_description__2UUrp\",\"categories\":\"bookCard_categories__zbyre\",\"title\":\"bookCard_title__2PP5t\",\"author\":\"bookCard_author__2Rs0g\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"founds\":\"booksList_founds__3ppYd\",\"cardWrapper\":\"booksList_cardWrapper__1qyYk\",\"button\":\"booksList_button__MQpor\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"categories\":\"categories_categories__3aJzr\",\"select\":\"categories_select__2MYa4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"category\":\"sorting_category__3O1AN\",\"sorting\":\"sorting_sorting__2a4TV\"};"],"sourceRoot":""}